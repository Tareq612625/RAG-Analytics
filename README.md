# RAG Analytics System

A ChatGPT-style conversational analytics interface that lets you query your business ERP data using natural language. Built with **FastAPI**, **Angular**, and **RAG (Retrieval Augmented Generation)** technology.

## ðŸ“¸ Screenshots

### Chat Interface
*Ask questions in natural language and get instant analytics*

![Chat Demo](docs/chat-demo.png)

### SQL & Data Details
*View the generated SQL queries and raw data tables*

![Chat Details](docs/chat-details.png)

### Database Explorer
*Browse all your ERP tables with pagination*

![Database Explorer](docs/database-explorer.png)

---

## ðŸŽ¯ Overview

This system transforms natural language questions into SQL queries, executes them against your business database, and returns human-readable answers. No SQL knowledge required!

**Example Queries:**
- "What were the total sales in Q4 2024?"
- "Which region has the highest revenue?"
- "Show me top 5 selling products this year"
- "Compare sales between 2023 and 2024"

---

## ðŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           RAG ANALYTICS SYSTEM                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Angular    â”‚         â”‚              FastAPI Backend                  â”‚  â”‚
â”‚  â”‚   Frontend   â”‚ â”€â”€â”€â”€â”€â”€â–º â”‚                                              â”‚  â”‚
â”‚  â”‚              â”‚   HTTP  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â€¢ Chat UI   â”‚         â”‚  â”‚           RAG PIPELINE                   â”‚ â”‚  â”‚
â”‚  â”‚  â€¢ DB View   â”‚         â”‚  â”‚                                         â”‚ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚ Step 1  â”‚    â”‚    ChromaDB      â”‚   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚ Context â”‚â—„â”€â”€â”€â”‚  Vector Store    â”‚   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚Retrievalâ”‚    â”‚                  â”‚   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â”‚ â€¢ Data Dictionaryâ”‚   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚       â”‚         â”‚ â€¢ Business Rules â”‚   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚       â–¼         â”‚ â€¢ Metrics Def.   â”‚   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚ Step 2  â”‚                           â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚   LLM   â”‚â—„â”€â”€â”€â”€ Groq / Gemini /      â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚  Call 1 â”‚      Ollama / OpenAI      â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚         â”‚                           â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚ â€¢ Query Refinement                  â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚ â€¢ SQL Generation                    â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                           â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚       â”‚                                â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚       â–¼                                â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚ Step 3  â”‚    â”‚     SQLite       â”‚   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚   SQL   â”‚â”€â”€â”€â–ºâ”‚    Database      â”‚   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚ Execute â”‚    â”‚                  â”‚   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â”‚ â€¢ Sales          â”‚   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚       â”‚         â”‚ â€¢ Products       â”‚   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚       â–¼         â”‚ â€¢ Customers      â”‚   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â€¢ Regions        â”‚   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚ Step 4  â”‚    â”‚ â€¢ Invoices       â”‚   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚   LLM   â”‚    â”‚ â€¢ Expenses       â”‚   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚  Call 2 â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚         â”‚                           â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚ â€¢ Answer Composition                â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â”‚ â€¢ Business Formatting               â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚ â”‚  â”‚
â”‚                           â”‚  â”‚                                         â”‚ â”‚  â”‚
â”‚                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚                           â”‚                                              â”‚  â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ RAG Pipeline Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         HOW THE RAG PIPELINE WORKS                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Question: "What were total sales by region last month?"
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: CONTEXT RETRIEVAL (Vector Search)                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚
â”‚                                                                              â”‚
â”‚  ChromaDB searches for relevant context:                                    â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ Data Dictionary â”‚  â”‚ Business Rules  â”‚  â”‚ Metric Defs     â”‚             â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚             â”‚
â”‚  â”‚ â€¢ sales table   â”‚  â”‚ â€¢ Only count    â”‚  â”‚ â€¢ Total Sales = â”‚             â”‚
â”‚  â”‚ â€¢ regions table â”‚  â”‚   COMPLETED     â”‚  â”‚   SUM(amount)   â”‚             â”‚
â”‚  â”‚ â€¢ columns info  â”‚  â”‚   orders        â”‚  â”‚   WHERE status  â”‚             â”‚
â”‚  â”‚                 â”‚  â”‚ â€¢ Use BDT       â”‚  â”‚   = COMPLETED   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                              â”‚
â”‚  Retrieved Context: Table schemas, business rules, metric formulas          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: LLM CALL 1 - Query Refinement + SQL Generation                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                     â”‚
â”‚                                                                              â”‚
â”‚  INPUT:                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ User Question: "What were total sales by region last month?"      â”‚       â”‚
â”‚  â”‚ Context: [table schemas, business rules, metric definitions]      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                           â”‚   LLM (Groq)  â”‚                                  â”‚
â”‚                           â”‚   Llama 3.3   â”‚                                  â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚  OUTPUT:                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Refined Question: "What is the total sales amount by region       â”‚       â”‚
â”‚  â”‚                    for November 2024?"                            â”‚       â”‚
â”‚  â”‚                                                                   â”‚       â”‚
â”‚  â”‚ SQL Query:                                                        â”‚       â”‚
â”‚  â”‚   SELECT r.name as region, SUM(s.amount) as total_sales          â”‚       â”‚
â”‚  â”‚   FROM sales s                                                    â”‚       â”‚
â”‚  â”‚   JOIN regions r ON s.region_id = r.id                           â”‚       â”‚
â”‚  â”‚   WHERE s.status = 'COMPLETED'                                    â”‚       â”‚
â”‚  â”‚     AND s.order_date >= date('now', 'start of month', '-1 month')â”‚       â”‚
â”‚  â”‚     AND s.order_date < date('now', 'start of month')             â”‚       â”‚
â”‚  â”‚   GROUP BY r.name                                                 â”‚       â”‚
â”‚  â”‚   ORDER BY total_sales DESC                                       â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: SQL EXECUTION                                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                       â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   SQL Query    â”‚ â”€â”€â”€â”€â”€â”€â–º â”‚          SQLite Database            â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚                                     â”‚        â”‚
â”‚                             â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚        â”‚
â”‚                             â”‚  â”‚ Results:                     â”‚   â”‚        â”‚
â”‚                             â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚        â”‚
â”‚                             â”‚  â”‚ â”‚ region     â”‚ total_sales â”‚ â”‚   â”‚        â”‚
â”‚                             â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â”‚        â”‚
â”‚                             â”‚  â”‚ â”‚ Dhaka      â”‚ 2,450,000   â”‚ â”‚   â”‚        â”‚
â”‚                             â”‚  â”‚ â”‚ Chattogram â”‚ 1,820,000   â”‚ â”‚   â”‚        â”‚
â”‚                             â”‚  â”‚ â”‚ Sylhet     â”‚ 980,000     â”‚ â”‚   â”‚        â”‚
â”‚                             â”‚  â”‚ â”‚ Rajshahi   â”‚ 750,000     â”‚ â”‚   â”‚        â”‚
â”‚                             â”‚  â”‚ â”‚ Khulna     â”‚ 620,000     â”‚ â”‚   â”‚        â”‚
â”‚                             â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚        â”‚
â”‚                             â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚        â”‚
â”‚                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 4: LLM CALL 2 - Answer Composition                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                    â”‚
â”‚                                                                              â”‚
â”‚  INPUT:                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Refined Question: "Total sales by region for November 2024"       â”‚       â”‚
â”‚  â”‚ SQL Results: [{region: "Dhaka", total: 2450000}, ...]            â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                           â”‚   LLM (Groq)  â”‚                                  â”‚
â”‚                           â”‚   Llama 3.3   â”‚                                  â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                    â”‚                                         â”‚
â”‚                                    â–¼                                         â”‚
â”‚  OUTPUT:                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  "Here's the sales breakdown by region for November 2024:        â”‚       â”‚
â”‚  â”‚                                                                   â”‚       â”‚
â”‚  â”‚   1. **Dhaka** leads with 24,50,000 BDT (37% of total)           â”‚       â”‚
â”‚  â”‚   2. **Chattogram** follows with 18,20,000 BDT (27%)             â”‚       â”‚
â”‚  â”‚   3. **Sylhet** contributed 9,80,000 BDT (15%)                   â”‚       â”‚
â”‚  â”‚   4. **Rajshahi** recorded 7,50,000 BDT (11%)                    â”‚       â”‚
â”‚  â”‚   5. **Khulna** had 6,20,000 BDT (10%)                           â”‚       â”‚
â”‚  â”‚                                                                   â”‚       â”‚
â”‚  â”‚   Total sales across all regions: 66,20,000 BDT                  â”‚       â”‚
â”‚  â”‚                                                                   â”‚       â”‚
â”‚  â”‚   Key Insight: Dhaka and Chattogram together account for         â”‚       â”‚
â”‚  â”‚   64% of total sales."                                           â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   Final Answer    â”‚
                        â”‚   Displayed to    â”‚
                        â”‚      User         â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“Š Database Schema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ERP DATABASE SCHEMA                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   REGIONS    â”‚       â”‚   PRODUCTS   â”‚       â”‚  CUSTOMERS   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚       â”‚ id (PK)      â”‚       â”‚ id (PK)      â”‚
â”‚ name         â”‚       â”‚ name         â”‚       â”‚ name         â”‚
â”‚ country      â”‚       â”‚ category     â”‚       â”‚ email        â”‚
â”‚ created_at   â”‚       â”‚ unit_price   â”‚       â”‚ phone        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ cost_price   â”‚       â”‚ region_id(FK)â”‚
       â”‚               â”‚ description  â”‚       â”‚ customer_typeâ”‚
       â”‚               â”‚ created_at   â”‚       â”‚ created_at   â”‚
       â”‚               â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                      â”‚                      â”‚
       â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚     â”‚
       â–¼     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  SALES                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)                                  â”‚
â”‚ order_date                               â”‚
â”‚ product_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ customer_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ region_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ quantity                                 â”‚
â”‚ unit_price                               â”‚
â”‚ discount                                 â”‚
â”‚ amount                                   â”‚
â”‚ status (COMPLETED/PENDING/CANCELLED)     â”‚
â”‚ payment_method                           â”‚
â”‚ created_at                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   INVOICES   â”‚       â”‚   EXPENSES   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚       â”‚ id (PK)      â”‚
â”‚ invoice_num  â”‚       â”‚ expense_date â”‚
â”‚ sale_id (FK) â”‚       â”‚ category     â”‚
â”‚ invoice_date â”‚       â”‚ description  â”‚
â”‚ due_date     â”‚       â”‚ amount       â”‚
â”‚ total_amount â”‚       â”‚ region_id(FK)â”‚
â”‚ paid_amount  â”‚       â”‚ created_at   â”‚
â”‚ status       â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ created_at   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸš€ Quick Start

### Prerequisites

- Python 3.10+
- Node.js 18+
- Git

### 1. Clone the Repository

```bash
git clone https://github.com/YOUR_USERNAME/rag-analytics.git
cd rag-analytics
```

### 2. Setup Backend (FastAPI)

```bash
cd fastapi-app

# Create virtual environment
python -m venv env

# Activate (Windows)
.\env\Scripts\activate

# Activate (Linux/Mac)
source env/bin/activate

# Install dependencies
pip install -r requirements.txt

# Copy environment file
cp .env.example .env

# Edit .env and add your API key (get free key from https://console.groq.com/keys)
# LLM_API_KEY=your_groq_api_key_here

# Run the server
python main.py
```

The API will be available at `http://localhost:8000`

### 3. Setup Frontend (Angular)

```bash
cd angular-app

# Install dependencies
npm install

# Run development server
ng serve
```

The app will be available at `http://localhost:4200`

---

## ðŸ”‘ LLM Provider Options (FREE!)

| Provider | Free Tier | Speed | Setup |
|----------|-----------|-------|-------|
| **Groq** (Recommended) | 30 req/min, 6000/day | Very Fast | [Get Key](https://console.groq.com/keys) |
| **Google Gemini** | 15 req/min, 1500/day | Fast | [Get Key](https://aistudio.google.com/app/apikey) |
| **Ollama** | Unlimited (local) | Depends on hardware | [Download](https://ollama.ai) |
| **OpenAI** | Paid only | Fast | [Get Key](https://platform.openai.com) |

### Configure in `.env`:

```env
# For Groq (Recommended)
LLM_PROVIDER=groq
LLM_API_KEY=your_groq_api_key_here
LLM_MODEL=llama-3.3-70b-versatile

# For Gemini
LLM_PROVIDER=gemini
LLM_API_KEY=your_gemini_api_key_here
LLM_MODEL=gemini-2.0-flash

# For Ollama (Local)
LLM_PROVIDER=ollama
LLM_API_KEY=not_needed
LLM_MODEL=llama3.1
```

---

## ðŸ“ Project Structure

```
rag-analytics/
â”œâ”€â”€ fastapi-app/                 # Backend API
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ routes.py        # API endpoints
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ database.py      # SQLAlchemy models
â”‚   â”‚   â”‚   â””â”€â”€ schemas.py       # Pydantic schemas
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ llm_service.py   # LLM provider integration
â”‚   â”‚   â”‚   â”œâ”€â”€ rag_pipeline.py  # RAG orchestration
â”‚   â”‚   â”‚   â”œâ”€â”€ vector_store.py  # ChromaDB integration
â”‚   â”‚   â”‚   â”œâ”€â”€ database_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ knowledge_base.py
â”‚   â”‚   â”‚   â””â”€â”€ seed_data.py     # Sample data generator
â”‚   â”‚   â””â”€â”€ config.py            # Configuration
â”‚   â”œâ”€â”€ main.py                  # FastAPI entry point
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ .env.example
â”‚
â”œâ”€â”€ angular-app/                 # Frontend UI
â”‚   â”œâ”€â”€ src/app/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/            # Chat interface
â”‚   â”‚   â”‚   â””â”€â”€ database-explorer/  # Database viewer
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ chat.service.ts  # API client
â”‚   â”‚   â””â”€â”€ models/
â”‚   â”‚       â””â”€â”€ chat.models.ts   # TypeScript interfaces
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

---

## ðŸŽ¨ Features

### Chat Interface
- Natural language queries
- Real-time responses
- View generated SQL
- See data tables
- Conversation history

### Database Explorer
- Browse all tables
- View table data
- Pagination support
- Column information

---

## ðŸ“ˆ Sample Data

The system comes with sample ERP data (2023-2025):

| Table | Records | Description |
|-------|---------|-------------|
| Regions | 5 | Bangladesh divisions |
| Products | 10 | Electronics, Furniture, Stationery |
| Customers | 12 | Retail, Wholesale, Corporate |
| Sales | ~10,000 | Daily transactions |
| Invoices | ~3,000 | From completed sales |
| Expenses | ~600 | Weekly expenses |

---

## ðŸ”’ Security

- SQL injection prevention (read-only queries)
- Environment variables for secrets
- CORS configuration
- Input validation

---

## ðŸ“ API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| POST | `/api/v1/chat` | Send natural language query |
| GET | `/api/v1/health` | Health check |
| GET | `/api/v1/schema` | Get database schema |
| GET | `/api/v1/database/tables` | List all tables |
| GET | `/api/v1/database/tables/{name}` | Get table data |

---

## ðŸ¤ Contributing

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

---

## ðŸ“„ License

MIT License - feel free to use this project for learning and commercial purposes.

---

## ðŸ™ Acknowledgments

- [Groq](https://groq.com) - Fast LLM inference
- [ChromaDB](https://www.trychroma.com) - Vector database
- [FastAPI](https://fastapi.tiangolo.com) - Modern Python web framework
- [Angular](https://angular.io) - Frontend framework

---

**Built with â¤ï¸ for Business Analytics**
